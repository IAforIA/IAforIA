{
  "timestamp": "2025-12-07T00:00:00Z",
  "branch": "fix/integration/20251207-missing-endpoints",
  "routes": [
    {"path": "/api/auth/register", "method": "POST", "file": "server/routes/auth.ts", "middleware": ["registerLimiter"], "notes": "public register (check repo policy)"},
    {"path": "/api/auth/login", "method": "POST", "file": "server/routes/auth.ts", "middleware": ["loginLimiter"]},
    {"path": "/api/me/profile", "method": "GET", "file": "server/routes/auth.ts", "middleware": ["authenticateToken", "requireRole(client)"]},
    {"path": "/api/orders", "method": "GET", "file": "server/routes/orders.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/orders/pending", "method": "GET", "file": "server/routes/orders.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/orders", "method": "POST", "file": "server/routes/orders.ts", "middleware": ["authenticateToken", "requireRole(client|central)"]},
    {"path": "/api/orders/:id/accept", "method": "POST", "file": "server/routes/orders.ts", "middleware": ["authenticateToken", "requireRole(motoboy|central)"]},
    {"path": "/api/orders/:id/deliver", "method": "POST", "file": "server/routes/orders.ts", "middleware": ["authenticateToken", "requireRole(motoboy|central)"]},
    {"path": "/api/orders/:id/cancel", "method": "PATCH", "file": "server/routes/orders.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/orders/:id/reassign", "method": "PATCH", "file": "server/routes/orders.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/chat", "method": "GET", "file": "server/routes/chat.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/chat", "method": "POST", "file": "server/routes/chat.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/chat/threads", "method": "GET", "file": "server/routes/chat.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/chat/ai-suggest", "method": "POST", "file": "server/routes/chat.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/chat/ai-feedback", "method": "POST", "file": "server/routes/chat.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/chat/usage-stats", "method": "GET", "file": "server/routes/chat.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/chat/budget-history", "method": "GET", "file": "server/routes/chat.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/reports/company", "method": "GET", "file": "server/routes/reports.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/reports/clients/:clientId", "method": "GET", "file": "server/routes/reports.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/reports/motoboys/:motoboyId", "method": "GET", "file": "server/routes/reports.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/reports/orders", "method": "GET", "file": "server/routes/reports.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/motoboys", "method": "GET", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys/locations/latest", "method": "GET", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys/me", "method": "GET", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(motoboy)"]},
    {"path": "/api/motoboys/:id/schedules", "method": "GET", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/motoboys/:id/schedules", "method": "POST", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/users/online", "method": "GET", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys/:id/online", "method": "PATCH", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys", "method": "POST", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys/:id", "method": "PATCH", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/motoboys/me", "method": "PATCH", "file": "server/routes/motoboys.ts", "middleware": ["authenticateToken", "requireRole(motoboy)"]},
    {"path": "/api/clients", "method": "GET", "file": "server/routes/clients.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/clients", "method": "POST", "file": "server/routes/clients.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/clients/:id", "method": "PATCH", "file": "server/routes/clients.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/clients/:id/schedules", "method": "GET", "file": "server/routes/clients.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/clients/me", "method": "PATCH", "file": "server/routes/clients.ts", "middleware": ["authenticateToken", "requireRole(client)"]},
    {"path": "/api/users", "method": "GET", "file": "server/routes/users.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/users/:id/status", "method": "PATCH", "file": "server/routes/users.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/users/:id/role", "method": "PATCH", "file": "server/routes/users.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/analytics/dashboard", "method": "GET", "file": "server/routes/analytics.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/analytics/revenue", "method": "GET", "file": "server/routes/analytics.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/analytics/motoboy/:id", "method": "GET", "file": "server/routes/analytics.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/analytics/client/:id", "method": "GET", "file": "server/routes/analytics.ts", "middleware": ["authenticateToken"]},
    {"path": "/api/analytics/mrr", "method": "GET", "file": "server/routes/analytics.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/upload/live-doc", "method": "POST", "file": "server/routes/uploads.ts", "middleware": ["authenticateToken", "multer.single(file)"]},
    {"path": "/api/upload/client-doc", "method": "POST", "file": "server/routes/uploads.ts", "middleware": ["authenticateToken", "requireRole(client)", "multer.single(file)"]},
    {"path": "/api/upload/motoboy-doc", "method": "POST", "file": "server/routes/uploads.ts", "middleware": ["authenticateToken", "requireRole(motoboy)", "multer.single(file)"]},
    {"path": "/api/schedules/all-clients", "method": "GET", "file": "server/routes/schedules.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/api/schedules/all-motoboys", "method": "GET", "file": "server/routes/schedules.ts", "middleware": ["authenticateToken", "requireRole(central)"]},
    {"path": "/health", "method": "GET", "file": "server/routes/index.ts", "middleware": []}
  ],
  "wsEvents": [
    "driver_online", "driver_offline", "chat_message", "chat_ai_suggestion_available", "new_order", "order_accepted", "order_delivered", "order_cancelled", "order_reassigned"
  ],
  "envKeysUsed": ["DATABASE_URL","JWT_SECRET","SESSION_SECRET","PORT","WS_PORT","NODE_ENV","FRONTEND_URL","BACKEND_URL","ALLOWED_ORIGINS","OPENAI_API_KEY","OPENAI_FINETUNED_MODEL_CEO","OPENAI_FINETUNED_MODEL_COMUNICACAO","OPENAI_BASE_MODEL","OPENAI_MODE","SLACK_WEBHOOK_URL","AI_CHAT_PORT","CENTRAL_USER_ID","TEST_AUTH_EMAIL","TEST_AUTH_PASSWORD"],
  "frontendApiCallsSample": [
    {"file": "client/src/pages/central/orders.tsx", "calls": ["PATCH /api/orders/:id/cancel", "PATCH /api/orders/:id/reassign"]},
    {"file": "client/src/pages/central/drivers.tsx", "calls": ["PATCH /api/motoboys/:id/online", "POST /api/motoboys"]},
    {"file": "client/src/pages/central/users.tsx", "calls": ["PATCH /api/users/:id/status", "PATCH /api/users/:id/role"]},
    {"file": "client/src/pages/client-dashboard.tsx", "calls": ["GET /api/clients/:id/schedules", "GET /api/reports/clients/:id"]},
    {"file": "client/src/pages/driver-dashboard.tsx", "calls": ["GET /api/reports/motoboys/:id", "POST /api/orders/:id/accept", "POST /api/orders/:id/deliver"]},
    {"file": "client/src/pages/central-dashboard.tsx", "calls": ["GET /api/schedules/all-clients", "GET /api/schedules/all-motoboys", "GET /api/motoboys/locations/latest"]}
  ],
  "missingEndpointsNoted": [
    "PATCH /api/users/:id (update profile fields)",
    "Compatibility alias for /api/clients/:id/schedules to aggregate schedule service (already partly present, ensure delegation)"
  ]
}
