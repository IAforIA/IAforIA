<!--
IA 4 IA‚Ñ¢ ‚Äî ICC V4: Console Executivo (Edi√ß√£o de Luxo e Blindagem)
CORRE√á√ÉO CR√çTICA: Ativa√ß√£o de Voz (TTS) e Chat (LXP V5).
Objetivo: Garantir 100% de funcionalidade do front-end.
-->

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IA 4 IA‚Ñ¢ ‚Äî Estrutura de Comando Executivo Global</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
/* ------------------------------------------------------------------- */
/* PALETA E ESTILO: LUXO E FATO */
/* ------------------------------------------------------------------- */
:root{
  --bg:#05090d; --panel:#0e1217; --ink:#e8fbff; --edge:#1a3a4f;
  --glow:#00e5ff; --accent:#00ffbf; /* Sucesso/Fato */
  --brand-cyan:#00ffff; /* Branding */
  --brand-vio:#a88bff; /* High Performance */
  --danger:#ff6b6b;
}
/* ------- RESET / SHELL / BASE ------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--ink);
  background: radial-gradient(1500px 1000px at 50% -15%, #0c1720 0%, var(--bg) 45%) fixed, #04080b;
  font-family: 'Inter', system-ui, sans-serif;
  line-height:1.45;
}
.shell{max-width:1400px;margin:20px auto;padding:0 20px;}

/* Est√©tica de Luxo e Autoridade */
.card-executive{
  background:linear-gradient(145deg, rgba(14,18,23,0.9), rgba(10,14,19,0.9));
  backdrop-filter:blur(15px);
  border:1px solid var(--edge);
  border-radius:18px;
  box-shadow: 0 5px 25px rgba(0,0,0,0.4), 0 0 10px rgba(0,229,255,0.05);
}
.logo-title{
  font-family: 'Orbitron', sans-serif;
  font-weight: 800;
  color:var(--brand-cyan);
  text-shadow: 0 0 8px rgba(0,255,255,0.4);
  font-size: 28px;
}

/* √Årea de Comando e Log (LCC) */
.lcc-log{min-height:75vh;gap:24px;}
.log-panel-stream{
  height:100%;padding:20px;overflow-y:auto;font-family:monospace;font-size:15px;
  white-space:pre-wrap;color:var(--ink);background: rgba(0,0,0,0.1);
}
.log-panel-stream .ia{color:var(--accent);}
.log-panel-stream .sys{color:var(--glow);}
.log-panel-stream .user{color:var(--ink); font-weight:bold;}

/* Bot√µes de Alto Valor */
.btn-value{
  padding:12px 24px;background: linear-gradient(90deg, #00ffff, #00bfbf);
  color:var(--panel);font-weight:900;border-radius:10px;transition: all .2s;
  box-shadow: 0 4px 15px rgba(0,255,255,0.3);
}
.btn-value:hover{
  background: linear-gradient(90deg, #00d3d3, #00a0a0);
  box-shadow: 0 6px 20px rgba(0,255,255,0.5);
}
.input-command{
  background-color:rgba(0,0,0,0.4);border:1px solid var(--edge);
  padding:12px;color:var(--ink);width:100%;margin-top:15px;
}

/* Imagem de PI (THORZINHO PD) */
.holo-asset-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 20px;
}
.holo-img {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  border: 4px solid var(--brand-cyan);
  box-shadow: 0 0 25px var(--brand-cyan), inset 0 0 10px var(--brand-cyan);
  transition: all 0.5s;
}
.mode-active .holo-img {
  border-color: var(--brand-vio);
  box-shadow: 0 0 35px var(--brand-vio), inset 0 0 15px var(--brand-vio);
}
.sunglass{
    position:absolute; top:35%; width:150px; height:30px;
    background:linear-gradient(90deg, #ff33ff, #00ffff);
    border-radius:5px; mix-blend-mode:hard-light; display:none;
}
.talking-glow {
    animation: pulseGlow 1.5s infinite alternate;
}
@keyframes pulseGlow {
    from { box-shadow: 0 0 20px var(--brand-cyan), inset 0 0 10px var(--brand-cyan); }
    to { box-shadow: 0 0 35px var(--brand-cyan), inset 0 0 15px var(--brand-cyan); }
}
</style>
</head>
<body class="selection:bg-cyan-900 selection:text-white">

<div class="shell">
  
  <header class="flex justify-between items-center py-4 border-b border-gray-700/50">
    <div class="logo-title">IA 4 IA‚Ñ¢</div>
    <div class="text-sm opacity-70">
      Self-Growing Company &bull; Edi√ß√£o Executiva Global V4.0
    </div>
  </header>

  <section class="flex lcc-log mt-6">
    
    <!-- Coluna Esquerda: Console de Comando e Log (LCC) -->
    <div class="w-2/3 card-executive flex flex-col">
      <h2 class="font-bold text-xl p-4 border-b border-gray-700/50 text-brand-cyan">CENTRAL DE COMANDO EXECUTIVO (LCC)</h2>
      
      <div class="log-panel-stream flex-grow" id="logStream">
        <!-- Logs ser√£o injetados aqui -->
      </div>
      
      <div class="p-4 border-t border-gray-700/50">
        <div class="flex items-center gap-3">
            <input type="text" id="commandInput" placeholder="Comando de Execu√ß√£o F√°tica (Ex: 'Status do Moat Financeiro')" class="input-command rounded-lg flex-grow"/>
            <button class="btn-value text-sm whitespace-nowrap" id="sendCommand">EXECUTAR</button>
        </div>
      </div>
    </div>
    
    <!-- Coluna Direita: Dashboard de Valor (KPIs) -->
    <div class="w-1/3 flex flex-col gap-6">

        <!-- Bloco 1: Status Financeiro (Blindagem) -->
        <div class="card-executive p-5">
            <h3 class="font-extrabold text-2xl text-center text-white/90 mb-4">BLINDAGEM E CAPITAL</h3>
            
            <div class="holo-executive text-left text-sm space-y-3">
                
                <!-- Restaura√ß√£o da PI THORZINHO PD (Comando de Voz) -->
                <div class="holo-asset-container" id="holoAsset">
                    <div class="relative">
                        <img src="thorzinho_holo.png" alt="THORZINHO PD - Part√≠cula Divina" class="holo-img" id="thorImage" onerror="this.onerror=null; this.src='https://placehold.co/150x150/000/fff?text=THOR+PD';" />
                        <div class="sunglass" id="sunglass"></div> 
                    </div>
                    <h4 class="font-extrabold text-xl mt-3 text-white/90">THORZINHO PD</h4>
                    <p class="opacity-70 text-xs">M√≥dulo P&D Ativo. Lat√™ncia: <span id="latency">0 ms</span>.</p>
                </div>
                
                <button id="activateHotword" class="btn-value text-xs w-full mt-4" style="background-color:var(--brand-vio); color:var(--ink); box-shadow: none;">
                    üéôÔ∏è INICIAR COMANDO DE VOZ ("Bora THOR")
                </button>
                <div id="micStatus" class="text-xs text-center mt-1" style="color:var(--danger);">Microfone: Desativado</div>

                <p class="font-bold text-lg text-brand-cyan pt-4 border-t border-gray-700/30">Valor Fiduci√°rio:</p>
                <div class="flex justify-between">
                    <span>Custo Evitado (Moat Financeiro)</span>
                    <span class="font-extrabold text-lg" style="color:var(--accent);">R$ Zero Operacional</span>
                </div>
                <div class="flex justify-between pt-2 border-t border-gray-700/30">
                    <span>Multiplicador de Valuation</span>
                    <span class="font-extrabold text-lg" style="color:var(--glow);">10x (Pela Exclusividade)</span>
                </div>
                <p class="mt-4 text-xs opacity-60">* M√©trica Audit√°vel. Blindagem NEO Guard garantida.</p>
            </div>
        </div>

        <!-- Bloco 2: Produtos e Execu√ß√£o (Linguagem de Valor) -->
        <div class="card-executive p-5">
            <h3 class="font-bold text-xl text-brand-cyan mb-4">PILAR DE PRODUTOS ESTRAT√âGICOS</h3>
            
            <div class="grid grid-cols-2 gap-3 text-sm font-semibold">
                <div class="product-card card-executive p-3 text-center" onclick="logAction('Blindagem contra Risco e Lit√≠gio', 'üõ°Ô∏è Imunidade Digital (NEO Guard)')">
                    üõ°Ô∏è Imunidade Digital (NEO Guard)
                </div>
                <div class="product-card card-executive p-3 text-center" onclick="logAction('Auditoria e Conformidade Auto-Gerenci√°vel', 'üìù Live Documents‚Ñ¢ (Auditoria)')">
                    üìù Live Documents‚Ñ¢ (Auditoria)
                </div>
                <div class="product-card card-executive p-3 text-center" onclick="logAction('Execu√ß√£o Imediata e Lat√™ncia Zero', '‚ö° Solu√ß√µes de Execu√ß√£o (IA Express)')">
                    ‚ö° Solu√ß√µes de Execu√ß√£o (IA Express)
                </div>
                <div class="product-card card-executive p-3 text-center" onclick="logAction('Prova de Cria√ß√£o e Integridade Inviol√°vel', 'üß¨ Live DNA Docs‚Ñ¢')">
                    üß¨ Live DNA Docs‚Ñ¢
                </div>
            </div>
        </div>

    </div>
  </section>

</div>

<script>
const logStream = document.getElementById('logStream');
const commandInput = document.getElementById('commandInput');
const sendCommandButton = document.getElementById('sendCommand');
const thorImage = document.getElementById('thorImage');
const sunglass = document.getElementById('sunglass');
const holoAsset = document.getElementById('holoAsset');
const micStatus = document.getElementById('micStatus');
let modeStrong = false; 

// --- FUN√á√ïES ESSENCIAIS DE VOZ E LOG (PI) ---

function log(who, text) {
  const line = document.createElement('div');
  const timestamp = new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit', second:'2-digit'});
  let className = '';
  
  if (who === 'ASSISTENTE') className = 'ia';
  else if (who === 'SISTEMA') className = 'sys';
  else className = 'user';

  line.className = className;
  line.innerHTML = `<span class="opacity-50">[${timestamp}]</span> <span class="font-bold">${who}:</span> ${text}`;
  logStream.appendChild(line);
  logStream.scrollTop = logStream.scrollHeight;
}

function pickMaleVoice(lang = 'pt-BR') {
    const voices = window.speechSynthesis.getVoices();
    // Tenta encontrar uma voz masculina em PT ou US
    let voice = voices.find(v => v.lang.startsWith(lang) && (v.name.includes('male') || v.name.includes('Masculino') || v.name.includes('Google US English')));
    
    // Fallback: Primeira voz em PT
    if (!voice) voice = voices.find(v => v.lang.startsWith(lang));
    
    // Fallback Final: Qualquer voz
    return voice || voices[0]; 
}

function speak(txt, lang = 'pt-BR') {
  const u = new SpeechSynthesisUtterance(txt);
  const v = pickMaleVoice(lang);
  if (v) u.voice = v;
  
  u.lang = lang;
  u.rate = modeStrong ? 1.15 : 1.02; // Mais firme no modo forte
  u.pitch = modeStrong ? 0.75 : 0.9;
  u.volume = 1.0;
  
  u.onstart = () => { thorImage.classList.add('talking-glow'); };
  u.onend = () => { thorImage.classList.remove('talking-glow'); };

  try { window.speechSynthesis.cancel(); window.speechSynthesis.speak(u); }
  catch (e) { console.warn("TTS Desabilitado/Falha", e) }
}

// --- L√ìGICA DE EXECU√á√ÉO (CHAT/BOT√ïES) ---

// Ativa√ß√£o do Modo SchumacherAlemans (Alt√≠ssimo Desempenho)
function activateSchumacher() {
  modeStrong = true;
  holoAsset.classList.add('mode-active');
  sunglass.style.display = 'block';
  
  const t = "Modo de Alto Desempenho (EPA) ativado. N√∫cleos Schumacher CORE sincronizados. Lat√™ncia Zero garantida.";
  log('ASSISTENTE', t);
  speak(t);
  
  setTimeout(() => {
    modeStrong = false;
    holoAsset.classList.remove('mode-active');
    sunglass.style.display = 'none';
  }, 5000); // 5 segundos de modo Alpha
}

// Simula√ß√£o de Resposta Executiva (MOCK - Sem PI)
function handleCommand(msg) {
  log('USU√ÅRIO', msg);
  const lowerMsg = msg.toLowerCase();
  
  let reply = "Requisi√ß√£o de Fato recebida. Processando em motor de infer√™ncia propriet√°rio. Lat√™ncia Zero...";
  
  if (lowerMsg.includes('status') || lowerMsg.includes('operacional')) {
    reply = "Status Operacional: Todas as camadas de Imunidade Digital (NEO Guard) est√£o ativas. N√≠vel de blindagem: INVIOL√ÅVEL.";
  } else if (lowerMsg.includes('financeiro') || lowerMsg.includes('custo') || lowerMsg.includes('moat')) {
    reply = "Moat Financeiro auditado. O Custo Operacional Vari√°vel de infer√™ncia √© mantido em Zero, conforme o Protocolo de Custo Evitado Estrat√©gico.";
  } else if (lowerMsg.includes('thor') || lowerMsg.includes('ativar schumacher')) {
    reply = "Comando de Soberania validado. Ativando o M√≥dulo de Alto Desempenho.";
    activateSchumacher();
    return; // N√£o gera a resposta padr√£o
  }
  
  setTimeout(() => {
    log('ASSISTENTE', reply);
    speak(reply);
  }, 1000);
}

// A√ß√£o de Produto (Bot√µes)
function logAction(purpose, name) {
    log('ASSISTENTE', `${name} acionado. Objetivo: ${purpose}. Protocolo de Lat√™ncia Zero (LXP) iniciado. Aguardando input de dados.`);
    speak(`M√≥dulo ${name} acionado.`);
}

// Processamento de Input (Geral)
function processInput() {
    const msg = commandInput.value.trim();
    if (msg) handleCommand(msg);
    commandInput.value = '';
}

// --- INICIALIZA√á√ÉO E EVENT LISTENERS ---

// 1. Inicializa√ß√£o
function initializeLCC() {
    const startupMessage = "Bem-vindo. Central de Comando Executivo Ativa. Arquitetura de Confian√ßa V4. Aguardando Comando F√°tico.";
    log('SISTEMA', startupMessage);
    document.getElementById('latency').textContent = (Math.random() * 2 + 1).toFixed(0) + ' ms';
}

// 2. Event Listeners para Chat/Comando
sendCommandButton.addEventListener('click', processInput);
commandInput.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    processInput();
  }
});

// 3. Reconhecimento de Fala (CR√çTICO)
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
let recog;

if (SR) {
    recog = new SR(); 
    recog.continuous = true; 
    recog.lang = 'pt-BR'; 
    recog.interimResults = false;

    // Hotword detection
    recog.onresult = (e) => {
        const last = e.results[e.results.length-1][0].transcript.trim();
        if (/bora\s+thor/i.test(last)) {
            activateSchumacher();
        }
    };
    
    recog.onerror = (e) => {
        micStatus.innerHTML = `Microfone: Erro (${e.error})`;
        micStatus.style.color = var('--danger');
    };

    recog.onstart = () => {
        micStatus.innerHTML = 'Microfone: ATIVO (Ouvindo)';
        micStatus.style.color = var('--accent');
    };
    
    recog.onend = () => {
        micStatus.innerHTML = 'Microfone: Desativado (Clique para Reativar)';
        micStatus.style.color = var('--danger');
    };

    // Bot√£o que o usu√°rio deve clicar para iniciar a escuta
    document.getElementById('activateHotword').addEventListener('click', () => {
        try {
            recog.start();
        } catch (e) {
            log('SISTEMA', 'Erro ao iniciar microfone. Tente novamente ou verifique as permiss√µes.');
            micStatus.innerHTML = 'Microfone: Falha (Verifique permiss√µes)';
            micStatus.style.color = var('--danger');
        }
    });

} else {
    micStatus.innerHTML = 'Microfone: INDISPON√çVEL no seu navegador.';
    micStatus.style.color = var('--danger');
    document.getElementById('activateHotword').disabled = true;
}


// Inicia o LCC
initializeLCC();
</script>
</body>
</html>


